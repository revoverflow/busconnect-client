<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>BusConnect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/main.css" />
    <script>
      var socket = io.connect('http://188.166.22.231:80');
      
      socket.on("verify", function(data) {
        if(data.success) {
          console.log("[!] Connexion au serveur réussie !");
          console.log("[ID] " + data.id);
          socket.emit("set_arret", { arret: "A-1" });
        }
      });
      
      socket.on("connect_error", () => {
        alert("[!] Connexion échouée");
      });
      
      function presence(ligne_num) {
        socket.emit("presence", { ligne: ligne_num });
      }
    </script>
</head>

<body>
    <div class="header">
        <p>Arrêt de bus</p>
    </div>
    <div class="lignes">
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
        <div class="ligne">
            <p class="numero-ligne">171</p>
            <p class="desc-ligne">Lyon -> Montluel</p>
        </div>
    </div>

    <div class="infos">
        <p class="lignenum">171</p>
        <button class="map" onclick="window.location.href = 'map.html'">Voir sur la carte</button>
        <button class="confirm" onclick="presence(171);">Confirmer</button>
    </div>
</body>

</html>
